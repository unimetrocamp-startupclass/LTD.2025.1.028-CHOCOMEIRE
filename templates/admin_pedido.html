{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  <h2>Pedido #{{ pedido.id }}</h2>
  <p><strong>Cliente:</strong> {{ cliente.nome }}</p>
  <p><strong>Email:</strong> {{ cliente.email }}</p>
  <p><strong>Data:</strong> {{ pedido.data_criacao.strftime('%d/%m/%Y %H:%M') if pedido.data_criacao else '—' }}</p>
  <p><strong>Status:</strong> {{ pedido.status if pedido.status else 'Pendente' }}</p>

  <h4 class="mt-4">Itens:</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Produto</th>
        <th>Quantidade</th>
        <th>Preço unitário</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      {% for item in produtos %}
      <tr>
        <td>{{ item.nome }}</td>
        <td>{{ item.quantidade }}</td>
        <td>R${{ '%.2f'|format(item.preco_unitario) }}</td>
        <td>R${{ '%.2f'|format(item.subtotal) }}</td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <th colspan="3" class="text-end">Total</th>
        <th>R${{ '%.2f'|format(total) }}</th>
      </tr>
    </tfoot>
  </table>

  <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary mt-3">Voltar</a>
</div>
{% endblock %}